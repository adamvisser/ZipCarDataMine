

$(document).ready(function () {
	$('.ui.sidebar').sidebar({
		dimPage: false,
		transition: 'scale down',
		mobileTransition: 'uncover'
	}).sidebar('attach events', '#MenuButton');
	$('#menu').sticky({
		context: '.pusher'
	});
	//alert('bootstrap attempt....');
});

angular.module('ziptopia.auth', ['ngResource', 'ngCookies']);
angular.module('ziptopia', ['ziptopia.auth', 'ngRoute']);
angular.module('ziptopia').config(function ($routeProvider) {
			$routeProvider.when('/', { templateUrl: '/views/home.html', controller: homeController }).when('/login', { templateUrl: '/views/login.html', controller: loginController });
});

//there is so much DI going on here.... need to figure out of this is bad and if it can be cleaned up
function homeController($scope, AuthCheck) {
	AuthCheck.forceAuth();
	//logged in and all is well
	$scope.fullName = AuthCheck.getFullName();
}


//there is so much DI going on here.... need to figure out of this is bad and if it can be cleaned up
function loginController($scope, AuthCheck, AuthResource, $location) {
	//for Auth
	$scope.auth = new AuthResource();
	//no errors yet, just getting started here
	$scope.auth.errors = false;
	$scope.checkLogin = function () {
		var invalid = false;
		if (typeof $scope.auth.password == 'undefined') {
			invalid = true;
		};
		if (typeof $scope.auth.username == 'undefined') {
			invalid = true;
		};
		if (invalid) {
			$scope.auth.errors = true;
		} else {
			$scope.auth.$save(function (auth) {
				console.log(auth);
				if (auth.errors == false) {
					//dont need an else, the view will take care of that ;)
					AuthCheck.setAuth(auth.token, auth.userid, auth.fullname, auth.username, auth.email);
					$location.path('/');
				}
			});
		}
	};
}
angular.module('ziptopia.auth').factory('AuthCheck', ['$location', '$cookies', function ($location, $cookies) {
  //todo this proper like we will want to set some timer that auto clears auth when the session from the server actually expires, but I still have to setup events and that could take a bit of time, may be out of scope, not sure yet.
  var loggedIn = true;
  if (typeof $cookies.get('loggedIn') === 'undefined') {
    loggedIn = false;
  };
  if (typeof $cookies.get('loggedIn') !== 'boolean') {
    loggedIn = false;
  };
  if (!loggedIn) {
    $cookies.put('loggedIn', false);
    $location.path('/login');
  }
  return {
    getAuth: function () {
      return $cookies.get('authToken');
    },
    loggedIn: loggedIn,
    getUserID: function () {
      return $cookies.get('userID');
    },
    getFullName: function () {
      return $cookies.get('fullName');
    },
    setAuth: function (newAuthToken, newUserID, newFullName, newUserName, newEmail) {
      $cookies.put('authToken', newAuthToken);
      $cookies.put('userID', newUserID);
      $cookies.put('fullName', newFullName);
      $cookies.put('userName', newUserName);
      $cookies.put('email', newEmail);
      $cookies.put('loggedIn', true);
    },
    clearAuth: function () {
      $cookies.put('authToken', '');
      $cookies.put('userID', 0);
      $cookies.put('fullName', '');
      $cookies.put('userName', '');
      $cookies.put('email', '');
      $cookies.put('loggedIn', false);
      $location.path('/login');
    },
    forceAuth: function () {
      if (!loggedIn) {
        $location.path('/login');
      }
    }
  };
}]);


angular.module('ziptopia.auth').factory('AuthResource', function ($resource) {
	var AuthResource = $resource('/login', {});
	AuthResource.prototype.isNew = function () {
		return typeof this.id === 'undefined';
	};
	return AuthResource;
});


angular.module('ziptopia.auth').controller('LogoutButton', ['$scope', 'AuthCheck', function ($scope, AuthCheck) {
	$scope.loggedIn = AuthCheck.loggedIn;
	$scope.logout = function () {
		AuthCheck.clearAuth();
	};
}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInJvdXRlcy5qcyIsImhvbWVDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwiQXV0aENoZWNrLmpzIiwiQXV0aFJlc291cmNlLmpzIiwiTG9nb3V0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsRUFBRSxRQUFGLEVBQVksS0FBWixDQUFrQixZQUFXO0FBQzFCLEdBQUUsYUFBRixFQUFpQixPQUFqQixDQUF5QjtBQUN4QixXQUFtQixLQUFuQjtBQUNBLGNBQW1CLFlBQW5CO0FBQ0Esb0JBQW1CLFNBQW5CO0VBSEQsRUFJRyxPQUpILENBSVcsZUFKWCxFQUk0QixhQUo1QixFQUQwQjtBQU0xQixHQUFFLE9BQUYsRUFBVyxNQUFYLENBQWtCO0FBQ2pCLFdBQVMsU0FBVDtFQUREOztBQU4wQixDQUFYLENBQWxCOztBQVlBLFFBQVEsTUFBUixDQUFlLGVBQWYsRUFBZ0MsQ0FBQyxZQUFELEVBQWMsV0FBZCxDQUFoQztBQUNBLFFBQVEsTUFBUixDQUFlLFVBQWYsRUFBMkIsQ0FBRSxlQUFGLEVBQWtCLFNBQWxCLENBQTNCO0FDZkEsUUFBUSxNQUFSLENBQWUsVUFBZixFQUEyQixNQUEzQixDQUFrQyxVQUFVLGNBQVYsRUFBMEI7QUFDekQsa0JBQ0MsSUFERCxDQUNNLEdBRE4sRUFDVyxFQUFDLGFBQWEsa0JBQWIsRUFBaUMsWUFBWSxjQUFaLEVBRDdDLEVBRUMsSUFGRCxDQUVNLFFBRk4sRUFFZ0IsRUFBQyxhQUFhLG1CQUFiLEVBQWtDLFlBQVksZUFBWixFQUZuRCxFQUR5RDtDQUExQixDQUFsQzs7O0FDRUEsU0FBUyxjQUFULENBQXdCLE1BQXhCLEVBQWdDLFNBQWhDLEVBQTBDO0FBQ3pDLFdBQVUsU0FBVjs7QUFEeUMsT0FHekMsQ0FBTyxRQUFQLEdBQWtCLFVBQVUsV0FBVixFQUFsQixDQUh5QztDQUExQzs7OztBQ0NBLFNBQVMsZUFBVCxDQUF5QixNQUF6QixFQUFpQyxTQUFqQyxFQUE0QyxZQUE1QyxFQUEwRCxTQUExRCxFQUFvRTs7QUFFbkUsUUFBTyxJQUFQLEdBQWMsSUFBSSxZQUFKLEVBQWQ7O0FBRm1FLE9BSW5FLENBQU8sSUFBUCxDQUFZLE1BQVosR0FBcUIsS0FBckIsQ0FKbUU7QUFLbkUsUUFBTyxVQUFQLEdBQW9CLFlBQVU7QUFDN0IsTUFBSSxVQUFVLEtBQVYsQ0FEeUI7QUFFdkIsTUFBSSxPQUFPLE9BQU8sSUFBUCxDQUFZLFFBQVosSUFBd0IsV0FBL0IsRUFBNEM7QUFBQyxhQUFRLElBQVIsQ0FBRDtHQUFoRCxDQUZ1QjtBQUd2QixNQUFJLE9BQU8sT0FBTyxJQUFQLENBQVksUUFBWixJQUF3QixXQUEvQixFQUE0QztBQUFDLGFBQVEsSUFBUixDQUFEO0dBQWhELENBSHVCO0FBSXZCLE1BQUksT0FBSixFQUFhO0FBQ1osVUFBTyxJQUFQLENBQVksTUFBWixHQUFxQixJQUFyQixDQURZO0dBQWIsTUFFTztBQUNOLFVBQU8sSUFBUCxDQUFZLEtBQVosQ0FBa0IsVUFBUyxJQUFULEVBQWM7QUFDL0IsWUFBUSxHQUFSLENBQVksSUFBWixFQUQrQjtBQUVyQyxRQUFJLEtBQUssTUFBTCxJQUFhLEtBQWIsRUFBb0I7O0FBRXZCLGVBQVUsT0FBVixDQUFrQixLQUFLLEtBQUwsRUFBWSxLQUFLLE1BQUwsRUFBYSxLQUFLLFFBQUwsRUFBZSxLQUFLLFFBQUwsRUFBZSxLQUFLLEtBQUwsQ0FBekUsQ0FGdUI7QUFHdkIsZUFBVSxJQUFWLENBQWUsR0FBZixFQUh1QjtLQUF4QjtJQUZ1QixDQUFsQixDQURNO0dBRlA7RUFKYSxDQUwrQztDQUFwRTtBQ0hBLFFBQVEsTUFBUixDQUFlLGVBQWYsRUFBZ0MsT0FBaEMsQ0FBd0MsV0FBeEMsRUFBcUQsQ0FBQyxXQUFELEVBQWMsVUFBZCxFQUEwQixVQUFTLFNBQVQsRUFBb0IsUUFBcEIsRUFBOEI7O0FBRTNHLE1BQUksV0FBVyxJQUFYLENBRnVHO0FBRzNHLE1BQUksT0FBTyxTQUFTLEdBQVQsQ0FBYSxVQUFiLENBQVAsS0FBb0MsV0FBcEMsRUFBaUQ7QUFBQyxlQUFTLEtBQVQsQ0FBRDtHQUFyRCxDQUgyRztBQUkzRyxNQUFJLE9BQU8sU0FBUyxHQUFULENBQWEsVUFBYixDQUFQLEtBQW9DLFNBQXBDLEVBQStDO0FBQUMsZUFBUyxLQUFULENBQUQ7R0FBbkQsQ0FKMkc7QUFLM0csTUFBSSxDQUFDLFFBQUQsRUFBVztBQUNiLGFBQVMsR0FBVCxDQUFhLFVBQWIsRUFBeUIsS0FBekIsRUFEYTtBQUViLGNBQVUsSUFBVixDQUFlLFFBQWYsRUFGYTtHQUFmO0FBSUEsU0FBTztBQUNMLGFBQVUsWUFBVTtBQUNsQixhQUFPLFNBQVMsR0FBVCxDQUFhLFdBQWIsQ0FBUCxDQURrQjtLQUFWO0FBR1YsY0FBVyxRQUFYO0FBQ0EsZUFBWSxZQUFZO0FBQ3RCLGFBQU8sU0FBUyxHQUFULENBQWEsUUFBYixDQUFQLENBRHNCO0tBQVo7QUFHWixpQkFBYyxZQUFZO0FBQ3hCLGFBQU8sU0FBUyxHQUFULENBQWEsVUFBYixDQUFQLENBRHdCO0tBQVo7QUFHZCxhQUFTLFVBQVMsWUFBVCxFQUF1QixTQUF2QixFQUFrQyxXQUFsQyxFQUErQyxXQUEvQyxFQUE0RCxRQUE1RCxFQUFxRTtBQUM1RSxlQUFTLEdBQVQsQ0FBYSxXQUFiLEVBQTBCLFlBQTFCLEVBRDRFO0FBRTVFLGVBQVMsR0FBVCxDQUFhLFFBQWIsRUFBdUIsU0FBdkIsRUFGNEU7QUFHNUUsZUFBUyxHQUFULENBQWEsVUFBYixFQUF5QixXQUF6QixFQUg0RTtBQUk1RSxlQUFTLEdBQVQsQ0FBYSxVQUFiLEVBQXlCLFdBQXpCLEVBSjRFO0FBSzVFLGVBQVMsR0FBVCxDQUFhLE9BQWIsRUFBc0IsUUFBdEIsRUFMNEU7QUFNNUUsZUFBUyxHQUFULENBQWEsVUFBYixFQUF5QixJQUF6QixFQU40RTtLQUFyRTtBQVNULGVBQVcsWUFBVTtBQUNuQixlQUFTLEdBQVQsQ0FBYSxXQUFiLEVBQTBCLEVBQTFCLEVBRG1CO0FBRW5CLGVBQVMsR0FBVCxDQUFhLFFBQWIsRUFBdUIsQ0FBdkIsRUFGbUI7QUFHbkIsZUFBUyxHQUFULENBQWEsVUFBYixFQUF5QixFQUF6QixFQUhtQjtBQUluQixlQUFTLEdBQVQsQ0FBYSxVQUFiLEVBQXlCLEVBQXpCLEVBSm1CO0FBS25CLGVBQVMsR0FBVCxDQUFhLE9BQWIsRUFBc0IsRUFBdEIsRUFMbUI7QUFNbkIsZUFBUyxHQUFULENBQWEsVUFBYixFQUF5QixLQUF6QixFQU5tQjtBQU9uQixnQkFBVSxJQUFWLENBQWUsUUFBZixFQVBtQjtLQUFWO0FBU1gsZUFBVyxZQUFVO0FBQ25CLFVBQUksQ0FBQyxRQUFELEVBQVc7QUFDYixrQkFBVSxJQUFWLENBQWUsUUFBZixFQURhO09BQWY7S0FEUztHQTdCYixDQVQyRztDQUE5QixDQUEvRTs7O0FDR0EsUUFBUSxNQUFSLENBQWUsZUFBZixFQUFnQyxPQUFoQyxDQUF3QyxjQUF4QyxFQUF3RCxVQUFVLFNBQVYsRUFBcUI7QUFDM0UsS0FBSSxlQUFlLFVBQVUsUUFBVixFQUFvQixFQUFwQixDQUFmLENBRHVFO0FBRTNFLGNBQWEsU0FBYixDQUF1QixLQUF2QixHQUErQixZQUFVO0FBQ3hDLFNBQVEsT0FBTyxLQUFLLEVBQUwsS0FBYSxXQUFwQixDQURnQztFQUFWLENBRjRDO0FBSzNFLFFBQU8sWUFBUCxDQUwyRTtDQUFyQixDQUF4RDs7O0FDRUEsUUFBUSxNQUFSLENBQWUsZUFBZixFQUFnQyxVQUFoQyxDQUEyQyxjQUEzQyxFQUEyRCxDQUFDLFFBQUQsRUFBVyxXQUFYLEVBQXdCLFVBQVMsTUFBVCxFQUFpQixTQUFqQixFQUE0QjtBQUM5RyxRQUFPLFFBQVAsR0FBa0IsVUFBVSxRQUFWLENBRDRGO0FBRTlHLFFBQU8sTUFBUCxHQUFnQixZQUFVO0FBQ3pCLFlBQVUsU0FBVixHQUR5QjtFQUFWLENBRjhGO0NBQTVCLENBQW5GIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRcdCQoJy51aS5zaWRlYmFyJykuc2lkZWJhcih7XG5cdFx0XHRcdGRpbVBhZ2UgICAgICAgICAgOiBmYWxzZSxcblx0XHRcdFx0dHJhbnNpdGlvbiAgICAgICA6ICdzY2FsZSBkb3duJyxcblx0XHRcdFx0bW9iaWxlVHJhbnNpdGlvbiA6ICd1bmNvdmVyJ1xuXHRcdFx0fSkuc2lkZWJhcignYXR0YWNoIGV2ZW50cycsICcjTWVudUJ1dHRvbicpO1xuXHRcdFx0JCgnI21lbnUnKS5zdGlja3koe1xuXHRcdFx0XHRjb250ZXh0OiAnLnB1c2hlcidcblx0XHRcdH0pO1xuXHRcdFx0Ly9hbGVydCgnYm9vdHN0cmFwIGF0dGVtcHQuLi4uJyk7XG5cdFx0fSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd6aXB0b3BpYS5hdXRoJywgWyduZ1Jlc291cmNlJywnbmdDb29raWVzJ10pO1xuYW5ndWxhci5tb2R1bGUoJ3ppcHRvcGlhJywgWyAnemlwdG9waWEuYXV0aCcsJ25nUm91dGUnXSk7IiwiYW5ndWxhci5tb2R1bGUoJ3ppcHRvcGlhJykuY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xuXHRcdFx0JHJvdXRlUHJvdmlkZXJcblx0XHRcdC53aGVuKCcvJywge3RlbXBsYXRlVXJsOiAnL3ZpZXdzL2hvbWUuaHRtbCcsIGNvbnRyb2xsZXI6IGhvbWVDb250cm9sbGVyfSlcblx0XHRcdC53aGVuKCcvbG9naW4nLCB7dGVtcGxhdGVVcmw6ICcvdmlld3MvbG9naW4uaHRtbCcsIGNvbnRyb2xsZXI6IGxvZ2luQ29udHJvbGxlcn0pO1xuXHRcdH0pOyIsIlxuLy90aGVyZSBpcyBzbyBtdWNoIERJIGdvaW5nIG9uIGhlcmUuLi4uIG5lZWQgdG8gZmlndXJlIG91dCBvZiB0aGlzIGlzIGJhZCBhbmQgaWYgaXQgY2FuIGJlIGNsZWFuZWQgdXBcbmZ1bmN0aW9uIGhvbWVDb250cm9sbGVyKCRzY29wZSwgQXV0aENoZWNrKXtcblx0QXV0aENoZWNrLmZvcmNlQXV0aCgpO1xuXHQvL2xvZ2dlZCBpbiBhbmQgYWxsIGlzIHdlbGxcblx0JHNjb3BlLmZ1bGxOYW1lID0gQXV0aENoZWNrLmdldEZ1bGxOYW1lKCk7XG59XG5cbiIsIlxuXG4vL3RoZXJlIGlzIHNvIG11Y2ggREkgZ29pbmcgb24gaGVyZS4uLi4gbmVlZCB0byBmaWd1cmUgb3V0IG9mIHRoaXMgaXMgYmFkIGFuZCBpZiBpdCBjYW4gYmUgY2xlYW5lZCB1cFxuZnVuY3Rpb24gbG9naW5Db250cm9sbGVyKCRzY29wZSwgQXV0aENoZWNrLCBBdXRoUmVzb3VyY2UsICRsb2NhdGlvbil7XG5cdC8vZm9yIEF1dGhcblx0JHNjb3BlLmF1dGggPSBuZXcgQXV0aFJlc291cmNlKCk7XG5cdC8vbm8gZXJyb3JzIHlldCwganVzdCBnZXR0aW5nIHN0YXJ0ZWQgaGVyZVxuXHQkc2NvcGUuYXV0aC5lcnJvcnMgPSBmYWxzZTtcblx0JHNjb3BlLmNoZWNrTG9naW4gPSBmdW5jdGlvbigpe1xuXHRcdHZhciBpbnZhbGlkID0gZmFsc2U7XG4gICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLmF1dGgucGFzc3dvcmQgPT0gJ3VuZGVmaW5lZCcpIHtpbnZhbGlkPXRydWU7fTtcbiAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUuYXV0aC51c2VybmFtZSA9PSAndW5kZWZpbmVkJykge2ludmFsaWQ9dHJ1ZTt9O1xuICAgICAgICBpZiAoaW52YWxpZCkge1xuICAgICAgICBcdCRzY29wZS5hdXRoLmVycm9ycyA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIFx0JHNjb3BlLmF1dGguJHNhdmUoZnVuY3Rpb24oYXV0aCl7XG4gICAgICAgIFx0XHRjb25zb2xlLmxvZyhhdXRoKTtcblx0XHRcdFx0aWYgKGF1dGguZXJyb3JzPT1mYWxzZSkge1xuXHRcdFx0XHRcdC8vZG9udCBuZWVkIGFuIGVsc2UsIHRoZSB2aWV3IHdpbGwgdGFrZSBjYXJlIG9mIHRoYXQgOylcblx0XHRcdFx0XHRBdXRoQ2hlY2suc2V0QXV0aChhdXRoLnRva2VuLCBhdXRoLnVzZXJpZCwgYXV0aC5mdWxsbmFtZSwgYXV0aC51c2VybmFtZSwgYXV0aC5lbWFpbCk7XG5cdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG4gICAgICAgIH1cblx0XHRcblx0fVxufVxuIiwiYW5ndWxhci5tb2R1bGUoJ3ppcHRvcGlhLmF1dGgnKS5mYWN0b3J5KCdBdXRoQ2hlY2snLCBbJyRsb2NhdGlvbicsICckY29va2llcycsIGZ1bmN0aW9uKCRsb2NhdGlvbiwgJGNvb2tpZXMpIHtcbiAgLy90b2RvIHRoaXMgcHJvcGVyIGxpa2Ugd2Ugd2lsbCB3YW50IHRvIHNldCBzb21lIHRpbWVyIHRoYXQgYXV0byBjbGVhcnMgYXV0aCB3aGVuIHRoZSBzZXNzaW9uIGZyb20gdGhlIHNlcnZlciBhY3R1YWxseSBleHBpcmVzLCBidXQgSSBzdGlsbCBoYXZlIHRvIHNldHVwIGV2ZW50cyBhbmQgdGhhdCBjb3VsZCB0YWtlIGEgYml0IG9mIHRpbWUsIG1heSBiZSBvdXQgb2Ygc2NvcGUsIG5vdCBzdXJlIHlldC5cbiAgdmFyIGxvZ2dlZEluID0gdHJ1ZTtcbiAgaWYgKHR5cGVvZiAkY29va2llcy5nZXQoJ2xvZ2dlZEluJykgPT09ICd1bmRlZmluZWQnKSB7bG9nZ2VkSW49ZmFsc2U7fTtcbiAgaWYgKHR5cGVvZiAkY29va2llcy5nZXQoJ2xvZ2dlZEluJykgIT09ICdib29sZWFuJykge2xvZ2dlZEluPWZhbHNlO307XG4gIGlmICghbG9nZ2VkSW4pIHtcbiAgICAkY29va2llcy5wdXQoJ2xvZ2dlZEluJywgZmFsc2UpO1xuICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGdldEF1dGggOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuICRjb29raWVzLmdldCgnYXV0aFRva2VuJyk7XG4gICAgfSxcbiAgICBsb2dnZWRJbiA6IGxvZ2dlZEluLFxuICAgIGdldFVzZXJJRCA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAkY29va2llcy5nZXQoJ3VzZXJJRCcpO1xuICAgIH0sXG4gICAgZ2V0RnVsbE5hbWUgOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gJGNvb2tpZXMuZ2V0KCdmdWxsTmFtZScpO1xuICAgIH0sXG4gICAgc2V0QXV0aDogZnVuY3Rpb24obmV3QXV0aFRva2VuLCBuZXdVc2VySUQsIG5ld0Z1bGxOYW1lLCBuZXdVc2VyTmFtZSwgbmV3RW1haWwpe1xuICAgICAgJGNvb2tpZXMucHV0KCdhdXRoVG9rZW4nLCBuZXdBdXRoVG9rZW4pO1xuICAgICAgJGNvb2tpZXMucHV0KCd1c2VySUQnLCBuZXdVc2VySUQpO1xuICAgICAgJGNvb2tpZXMucHV0KCdmdWxsTmFtZScsIG5ld0Z1bGxOYW1lKTtcbiAgICAgICRjb29raWVzLnB1dCgndXNlck5hbWUnLCBuZXdVc2VyTmFtZSk7XG4gICAgICAkY29va2llcy5wdXQoJ2VtYWlsJywgbmV3RW1haWwpO1xuICAgICAgJGNvb2tpZXMucHV0KCdsb2dnZWRJbicsIHRydWUpO1xuICAgICAgXG4gICAgfSxcbiAgICBjbGVhckF1dGg6IGZ1bmN0aW9uKCl7XG4gICAgICAkY29va2llcy5wdXQoJ2F1dGhUb2tlbicsICcnKTtcbiAgICAgICRjb29raWVzLnB1dCgndXNlcklEJywgMCk7XG4gICAgICAkY29va2llcy5wdXQoJ2Z1bGxOYW1lJywgJycpO1xuICAgICAgJGNvb2tpZXMucHV0KCd1c2VyTmFtZScsICcnKTtcbiAgICAgICRjb29raWVzLnB1dCgnZW1haWwnLCAnJyk7XG4gICAgICAkY29va2llcy5wdXQoJ2xvZ2dlZEluJywgZmFsc2UpO1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xuICAgIH0sXG4gICAgZm9yY2VBdXRoOiBmdW5jdGlvbigpe1xuICAgICAgaWYgKCFsb2dnZWRJbikge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XSk7IiwiXG5cblxuYW5ndWxhci5tb2R1bGUoJ3ppcHRvcGlhLmF1dGgnKS5mYWN0b3J5KCdBdXRoUmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG5cdFx0dmFyIEF1dGhSZXNvdXJjZSA9ICRyZXNvdXJjZSgnL2xvZ2luJywge30pO1xuXHRcdEF1dGhSZXNvdXJjZS5wcm90b3R5cGUuaXNOZXcgPSBmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuICh0eXBlb2YodGhpcy5pZCkgPT09ICd1bmRlZmluZWQnKTtcblx0XHR9XG5cdFx0cmV0dXJuIEF1dGhSZXNvdXJjZTtcblx0fSk7IiwiXG5cblxuXG5cbmFuZ3VsYXIubW9kdWxlKCd6aXB0b3BpYS5hdXRoJykuY29udHJvbGxlcignTG9nb3V0QnV0dG9uJywgWyckc2NvcGUnLCAnQXV0aENoZWNrJywgZnVuY3Rpb24oJHNjb3BlLCBBdXRoQ2hlY2spIHtcblx0JHNjb3BlLmxvZ2dlZEluID0gQXV0aENoZWNrLmxvZ2dlZEluO1xuXHQkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcblx0XHRBdXRoQ2hlY2suY2xlYXJBdXRoKCk7XG5cdH1cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
