

$(document).ready(function () {
	$('.ui.sidebar').sidebar({
		dimPage: false,
		transition: 'scale down',
		mobileTransition: 'uncover'
	}).sidebar('attach events', '#MenuButton');
	$('#menu').sticky({
		context: '.pusher'
	});
	//alert('bootstrap attempt....');
});

angular.module('ziptopia.auth', ['ngResource', 'ngCookies']);
angular.module('ziptopia', ['ziptopia.auth', 'ngRoute']);
angular.module('ziptopia').config(function ($routeProvider) {
			$routeProvider.when('/', { templateUrl: '/views/home.html', controller: homeController }).when('/login', { templateUrl: '/views/login.html', controller: AuthController });
});


//there is so much DI going on here.... need to figure out of this is bad and if it can be cleaned up
function AuthController($scope, AuthCheck, AuthResource, $location) {
	//for Auth
	$scope.loginAuth = new AuthResource();
	$scope.registerAuth = new AuthResource();
	//no errors yet, just getting started here
	$scope.loginAuth.errors = false;
	$scope.registerAuth.errors = false;
	$scope.checkLogin = function () {
		var invalid = false;
		if (typeof $scope.loginAuth.password == 'undefined') {
			invalid = true;
		};
		if (typeof $scope.loginAuth.username == 'undefined') {
			invalid = true;
		};
		if (invalid) {
			$scope.loginAuth.errors = true;
		} else {
			$scope.loginAuth.$save(function (auth) {
				console.log(auth);
				if (auth.errors == false) {
					//dont need an else, the view will take care of that ;)
					AuthCheck.setAuth(auth.token, auth.userid, auth.fullname, auth.username, auth.email);
					$location.path('/');
				}
			});
		}
	};
}

//there is so much DI going on here.... need to figure out of this is bad and if it can be cleaned up
function homeController($scope, AuthCheck) {
	AuthCheck.forceAuth();
	//logged in and all is well
	$scope.fullName = AuthCheck.getFullName();
}


angular.module('ziptopia.auth').controller('LogoutController', ['$scope', 'AuthCheck', function ($scope, AuthCheck) {
	$scope.loggedIn = AuthCheck.loggedIn;
	$scope.logout = function () {
		AuthCheck.clearAuth();
	};
}]);
angular.module('ziptopia.auth').factory('AuthCheck', ['$location', '$cookies', function ($location, $cookies) {
  //todo this proper like we will want to set some timer that auto clears auth when the session from the server actually expires, but I still have to setup events and that could take a bit of time, may be out of scope, not sure
  return {
    getAuth: function () {
      return $cookies.get('authToken');
    },
    isLoggedIn: function () {
      return $cookies.get('loggedIn');
    },
    getUserID: function () {
      return $cookies.get('userID');
    },
    getFullName: function () {
      return $cookies.get('fullName');
    },
    setAuth: function (newAuthToken, newUserID, newFullName, newUserName, newEmail) {
      $cookies.put('authToken', newAuthToken);
      $cookies.put('userID', newUserID);
      $cookies.put('fullName', newFullName);
      $cookies.put('userName', newUserName);
      $cookies.put('email', newEmail);
      $cookies.put('loggedIn', true);
    },
    clearAuth: function () {
      $cookies.remove('authToken');
      $cookies.remove('userID');
      $cookies.remove('fullName');
      $cookies.remove('userName');
      $cookies.remove('email');
      $cookies.remove('loggedIn');
      $location.path('/login');
    },
    forceAuth: function () {
      var loggedIn = $cookies.get('loggedIn');
      if (!loggedIn) {
        $location.path('/login');
      }
    }
  };
}]);


angular.module('ziptopia.auth').factory('AuthResource', function ($resource) {
	var AuthResource = $resource('/login', {});
	AuthResource.prototype.isNew = function () {
		return typeof this.id === 'undefined';
	};
	return AuthResource;
});


angular.module('ziptopia.auth').controller('LogoutController', ['$scope', 'AuthCheck', function ($scope, AuthCheck) {
	$scope.loggedIn = AuthCheck.isLoggedIn;
	$scope.logout = function () {
		AuthCheck.clearAuth();
	};
}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInJvdXRlcy5qcyIsIkF1dGhDb250cm9sbGVyLmpzIiwiSG9tZUNvbnRyb2xsZXIuanMiLCJMb2dvdXRDb250cm9sbGVyLmpzIiwiQXV0aENoZWNrLmpzIiwiQXV0aFJlc291cmNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsRUFBRSxRQUFGLEVBQVksS0FBWixDQUFrQixZQUFXO0FBQzFCLEdBQUUsYUFBRixFQUFpQixPQUFqQixDQUF5QjtBQUN4QixXQUFtQixLQUFuQjtBQUNBLGNBQW1CLFlBQW5CO0FBQ0Esb0JBQW1CLFNBQW5CO0VBSEQsRUFJRyxPQUpILENBSVcsZUFKWCxFQUk0QixhQUo1QixFQUQwQjtBQU0xQixHQUFFLE9BQUYsRUFBVyxNQUFYLENBQWtCO0FBQ2pCLFdBQVMsU0FBVDtFQUREOztBQU4wQixDQUFYLENBQWxCOztBQVlBLFFBQVEsTUFBUixDQUFlLGVBQWYsRUFBZ0MsQ0FBQyxZQUFELEVBQWMsV0FBZCxDQUFoQztBQUNBLFFBQVEsTUFBUixDQUFlLFVBQWYsRUFBMkIsQ0FBRSxlQUFGLEVBQWtCLFNBQWxCLENBQTNCO0FDZkEsUUFBUSxNQUFSLENBQWUsVUFBZixFQUEyQixNQUEzQixDQUFrQyxVQUFVLGNBQVYsRUFBMEI7QUFDekQsa0JBQ0MsSUFERCxDQUNNLEdBRE4sRUFDVyxFQUFDLGFBQWEsa0JBQWIsRUFBaUMsWUFBWSxjQUFaLEVBRDdDLEVBRUMsSUFGRCxDQUVNLFFBRk4sRUFFZ0IsRUFBQyxhQUFhLG1CQUFiLEVBQWtDLFlBQVksY0FBWixFQUZuRCxFQUR5RDtDQUExQixDQUFsQzs7OztBQ0dBLFNBQVMsY0FBVCxDQUF3QixNQUF4QixFQUFnQyxTQUFoQyxFQUEyQyxZQUEzQyxFQUF5RCxTQUF6RCxFQUFtRTs7QUFFbEUsUUFBTyxTQUFQLEdBQW1CLElBQUksWUFBSixFQUFuQixDQUZrRTtBQUdsRSxRQUFPLFlBQVAsR0FBc0IsSUFBSSxZQUFKLEVBQXRCOztBQUhrRSxPQUtsRSxD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LGVBQVMsTUFBVCxDQUFnQixRQUFoQixFQUZtQjtBQUduQixlQUFTLE1BQVQsQ0FBZ0IsVUFBaEIsRUFIbUI7QUFJbkIsZUFBUyxNQUFULENBQWdCLFVBQWhCLEVBSm1CO0FBS25CLGVBQVMsTUFBVCxDQUFnQixPQUFoQixFQUxtQjtBQU1uQixlQUFTLE1BQVQsQ0FBZ0IsVUFBaEIsRUFObUI7QUFPbkIsZ0JBQVUsSUFBVixDQUFlLFFBQWYsRUFQbUI7S0FBVjtBQVNYLGVBQVcsWUFBVTtBQUNuQixVQUFJLFdBQVcsU0FBUyxHQUFULENBQWEsVUFBYixDQUFYLENBRGU7QUFFbkIsVUFBSSxDQUFDLFFBQUQsRUFBVztBQUNiLGtCQUFVLElBQVYsQ0FBZSxRQUFmLEVBRGE7T0FBZjtLQUZTO0dBL0JiLENBRjJHO0NBQTlCLENBQS9FOzs7QUNHQSxRQUFRLE1BQVIsQ0FBZSxlQUFmLEVBQWdDLE9BQWhDLENBQXdDLGNBQXhDLEVBQXdELFVBQVUsU0FBVixFQUFxQjtBQUMzRSxLQUFJLGVBQWUsVUFBVSxRQUFWLEVBQW9CLEVBQXBCLENBQWYsQ0FEdUU7QUFFM0UsY0FBYSxTQUFiLENBQXVCLEtBQXZCLEdBQStCLFlBQVU7QUFDeEMsU0FBUSxPQUFPLEtBQUssRUFBTCxLQUFhLFdBQXBCLENBRGdDO0VBQVYsQ0FGNEM7QUFLM0UsUUFBTyxZQUFQLENBTDJFO0NBQXJCLENBQXhEOzs7QUZFQSxRQUFRLE1BQVIsQ0FBZSxlQUFmLEVBQWdDLFVBQWhDLENBQTJDLGtCQUEzQyxFQUErRCxDQUFDLFFBQUQsRUFBVyxXQUFYLEVBQXdCLFVBQVMsTUFBVCxFQUFpQixTQUFqQixFQUE0QjtBQUNsSCxRQUFPLFFBQVAsR0FBa0IsVUFBVSxVQUFWLENBRGdHO0FBRWxILFFBQU8sTUFBUCxHQUFnQixZQUFVO0FBQ3pCLFlBQVUsU0FBVixHQUR5QjtFQUFWLENBRmtHO0NBQTVCLENBQXZGIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRcdCQoJy51aS5zaWRlYmFyJykuc2lkZWJhcih7XG5cdFx0XHRcdGRpbVBhZ2UgICAgICAgICAgOiBmYWxzZSxcblx0XHRcdFx0dHJhbnNpdGlvbiAgICAgICA6ICdzY2FsZSBkb3duJyxcblx0XHRcdFx0bW9iaWxlVHJhbnNpdGlvbiA6ICd1bmNvdmVyJ1xuXHRcdFx0fSkuc2lkZWJhcignYXR0YWNoIGV2ZW50cycsICcjTWVudUJ1dHRvbicpO1xuXHRcdFx0JCgnI21lbnUnKS5zdGlja3koe1xuXHRcdFx0XHRjb250ZXh0OiAnLnB1c2hlcidcblx0XHRcdH0pO1xuXHRcdFx0Ly9hbGVydCgnYm9vdHN0cmFwIGF0dGVtcHQuLi4uJyk7XG5cdFx0fSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd6aXB0b3BpYS5hdXRoJywgWyduZ1Jlc291cmNlJywnbmdDb29raWVzJ10pO1xuYW5ndWxhci5tb2R1bGUoJ3ppcHRvcGlhJywgWyAnemlwdG9waWEuYXV0aCcsJ25nUm91dGUnXSk7IiwiYW5ndWxhci5tb2R1bGUoJ3ppcHRvcGlhJykuY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xuXHRcdFx0JHJvdXRlUHJvdmlkZXJcblx0XHRcdC53aGVuKCcvJywge3RlbXBsYXRlVXJsOiAnL3ZpZXdzL2hvbWUuaHRtbCcsIGNvbnRyb2xsZXI6IGhvbWVDb250cm9sbGVyfSlcblx0XHRcdC53aGVuKCcvbG9naW4nLCB7dGVtcGxhdGVVcmw6ICcvdmlld3MvbG9naW4uaHRtbCcsIGNvbnRyb2xsZXI6IEF1dGhDb250cm9sbGVyfSk7XG5cdFx0fSk7IiwiXG5cbi8vdGhlcmUgaXMgc28gbXVjaCBESSBnb2luZyBvbiBoZXJlLi4uLiBuZWVkIHRvIGZpZ3VyZSBvdXQgb2YgdGhpcyBpcyBiYWQgYW5kIGlmIGl0IGNhbiBiZSBjbGVhbmVkIHVwXG5mdW5jdGlvbiBBdXRoQ29udHJvbGxlcigkc2NvcGUsIEF1dGhDaGVjaywgQXV0aFJlc291cmNlLCAkbG9jYXRpb24pe1xuXHQvL2ZvciBBdXRoXG5cdCRzY29wZS5sb2dpbkF1dGggPSBuZXcgQXV0aFJlc291cmNlKCk7XG5cdCRzY29wZS5yZWdpc3RlckF1dGggPSBuZXcgQXV0aFJlc291cmNlKCk7XG5cdC8vbm8gZXJyb3JzIHlldCwganVzdCBnZXR0aW5nIHN0YXJ0ZWQgaGVyZVxuXHQkc2NvcGUubG9naW5BdXRoLmVycm9ycyA9IGZhbHNlO1xuXHQkc2NvcGUucmVnaXN0ZXJBdXRoLmVycm9ycyA9IGZhbHNlO1xuXHQkc2NvcGUuY2hlY2tMb2dpbiA9IGZ1bmN0aW9uKCl7XG5cdFx0dmFyIGludmFsaWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUubG9naW5BdXRoLnBhc3N3b3JkID09ICd1bmRlZmluZWQnKSB7aW52YWxpZD10cnVlO307XG4gICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLmxvZ2luQXV0aC51c2VybmFtZSA9PSAndW5kZWZpbmVkJykge2ludmFsaWQ9dHJ1ZTt9O1xuICAgICAgICBpZiAoaW52YWxpZCkge1xuICAgICAgICBcdCRzY29wZS5sb2dpbkF1dGguZXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgXHQkc2NvcGUubG9naW5BdXRoLiRzYXZlKGZ1bmN0aW9uKGF1dGgpe1xuICAgICAgICBcdFx0Y29uc29sZS5sb2coYXV0aCk7XG5cdFx0XHRcdGlmIChhdXRoLmVycm9ycz09ZmFsc2UpIHtcblx0XHRcdFx0XHQvL2RvbnQgbmVlZCBhbiBlbHNlLCB0aGUgdmlldyB3aWxsIHRha2UgY2FyZSBvZiB0aGF0IDspXG5cdFx0XHRcdFx0QXV0aENoZWNrLnNldEF1dGgoYXV0aC50b2tlbiwgYXV0aC51c2VyaWQsIGF1dGguZnVsbG5hbWUsIGF1dGgudXNlcm5hbWUsIGF1dGguZW1haWwpO1xuXHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuICAgICAgICB9XG5cdFx0XG5cdH1cbn1cbiIsIlxuLy90aGVyZSBpcyBzbyBtdWNoIERJIGdvaW5nIG9uIGhlcmUuLi4uIG5lZWQgdG8gZmlndXJlIG91dCBvZiB0aGlzIGlzIGJhZCBhbmQgaWYgaXQgY2FuIGJlIGNsZWFuZWQgdXBcbmZ1bmN0aW9uIGhvbWVDb250cm9sbGVyKCRzY29wZSwgQXV0aENoZWNrKXtcblx0QXV0aENoZWNrLmZvcmNlQXV0aCgpO1xuXHQvL2xvZ2dlZCBpbiBhbmQgYWxsIGlzIHdlbGxcblx0JHNjb3BlLmZ1bGxOYW1lID0gQXV0aENoZWNrLmdldEZ1bGxOYW1lKCk7XG59XG5cbiIsIlxuXG5cblxuXG5hbmd1bGFyLm1vZHVsZSgnemlwdG9waWEuYXV0aCcpLmNvbnRyb2xsZXIoJ0xvZ291dENvbnRyb2xsZXInLCBbJyRzY29wZScsICdBdXRoQ2hlY2snLCBmdW5jdGlvbigkc2NvcGUsIEF1dGhDaGVjaykge1xuXHQkc2NvcGUubG9nZ2VkSW4gPSBBdXRoQ2hlY2suaXNMb2dnZWRJbjtcblx0JHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCl7XG5cdFx0QXV0aENoZWNrLmNsZWFyQXV0aCgpO1xuXHR9XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnemlwdG9waWEuYXV0aCcpLmZhY3RvcnkoJ0F1dGhDaGVjaycsIFsnJGxvY2F0aW9uJywgJyRjb29raWVzJywgZnVuY3Rpb24oJGxvY2F0aW9uLCAkY29va2llcykge1xuICAvL3RvZG8gdGhpcyBwcm9wZXIgbGlrZSB3ZSB3aWxsIHdhbnQgdG8gc2V0IHNvbWUgdGltZXIgdGhhdCBhdXRvIGNsZWFycyBhdXRoIHdoZW4gdGhlIHNlc3Npb24gZnJvbSB0aGUgc2VydmVyIGFjdHVhbGx5IGV4cGlyZXMsIGJ1dCBJIHN0aWxsIGhhdmUgdG8gc2V0dXAgZXZlbnRzIGFuZCB0aGF0IGNvdWxkIHRha2UgYSBiaXQgb2YgdGltZSwgbWF5IGJlIG91dCBvZiBzY29wZSwgbm90IHN1cmVcbiAgcmV0dXJuIHtcbiAgICBnZXRBdXRoIDogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiAkY29va2llcy5nZXQoJ2F1dGhUb2tlbicpO1xuICAgIH0sXG4gICAgaXNMb2dnZWRJbiA6IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gJGNvb2tpZXMuZ2V0KCdsb2dnZWRJbicpO1xuICAgIH0sXG4gICAgZ2V0VXNlcklEIDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICRjb29raWVzLmdldCgndXNlcklEJyk7XG4gICAgfSxcbiAgICBnZXRGdWxsTmFtZSA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAkY29va2llcy5nZXQoJ2Z1bGxOYW1lJyk7XG4gICAgfSxcbiAgICBzZXRBdXRoOiBmdW5jdGlvbihuZXdBdXRoVG9rZW4sIG5ld1VzZXJJRCwgbmV3RnVsbE5hbWUsIG5ld1VzZXJOYW1lLCBuZXdFbWFpbCl7XG4gICAgICAkY29va2llcy5wdXQoJ2F1dGhUb2tlbicsIG5ld0F1dGhUb2tlbik7XG4gICAgICAkY29va2llcy5wdXQoJ3VzZXJJRCcsIG5ld1VzZXJJRCk7XG4gICAgICAkY29va2llcy5wdXQoJ2Z1bGxOYW1lJywgbmV3RnVsbE5hbWUpO1xuICAgICAgJGNvb2tpZXMucHV0KCd1c2VyTmFtZScsIG5ld1VzZXJOYW1lKTtcbiAgICAgICRjb29raWVzLnB1dCgnZW1haWwnLCBuZXdFbWFpbCk7XG4gICAgICAkY29va2llcy5wdXQoJ2xvZ2dlZEluJywgdHJ1ZSk7XG4gICAgICBcbiAgICB9LFxuICAgIGNsZWFyQXV0aDogZnVuY3Rpb24oKXtcbiAgICAgICRjb29raWVzLnJlbW92ZSgnYXV0aFRva2VuJyk7XG4gICAgICAkY29va2llcy5yZW1vdmUoJ3VzZXJJRCcpO1xuICAgICAgJGNvb2tpZXMucmVtb3ZlKCdmdWxsTmFtZScpO1xuICAgICAgJGNvb2tpZXMucmVtb3ZlKCd1c2VyTmFtZScpO1xuICAgICAgJGNvb2tpZXMucmVtb3ZlKCdlbWFpbCcpO1xuICAgICAgJGNvb2tpZXMucmVtb3ZlKCdsb2dnZWRJbicpO1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xuICAgIH0sXG4gICAgZm9yY2VBdXRoOiBmdW5jdGlvbigpe1xuICAgICAgdmFyIGxvZ2dlZEluID0gJGNvb2tpZXMuZ2V0KCdsb2dnZWRJbicpO1xuICAgICAgaWYgKCFsb2dnZWRJbikge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XSk7IiwiXG5cblxuYW5ndWxhci5tb2R1bGUoJ3ppcHRvcGlhLmF1dGgnKS5mYWN0b3J5KCdBdXRoUmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG5cdFx0dmFyIEF1dGhSZXNvdXJjZSA9ICRyZXNvdXJjZSgnL2xvZ2luJywge30pO1xuXHRcdEF1dGhSZXNvdXJjZS5wcm90b3R5cGUuaXNOZXcgPSBmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuICh0eXBlb2YodGhpcy5pZCkgPT09ICd1bmRlZmluZWQnKTtcblx0XHR9XG5cdFx0cmV0dXJuIEF1dGhSZXNvdXJjZTtcblx0fSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
